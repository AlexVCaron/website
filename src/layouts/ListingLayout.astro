---
import PageLayout from '@layouts/PageLayout.astro';
import FilterBar from '@components/FilterBar.svelte';
import ComponentListing from '@components/component/ComponentListing.svelte';
import PipelinesListing from '@components/pipeline/PipelinesListing.svelte';
import ConfigListing from '@components/ConfigListing.svelte';

export interface Props {
    title: string;
    description: string;
    filter: { name: string; class?: string }[];
    displayStyle: { name: string; icon: string }[];
    sortBy: string[];
    pipelines?: {
        name: string;
        description: string;
        stargazers_count: number;
        topics: string[];
        releases: {
            published_at: string;
            tag_name: string;
        }[];
        archived: boolean;
    }[];
    components?: {
        name: string;
        path: string;
        type: string;
        meta: {
            description: string;
            name: string;
        };
        pipelines: {
            name: string;
            version: string;
        }[];
    }[];
    configs?: {
        name: string;
        content: string;
        config: {};
    }[];
}

const { title, description, filter, displayStyle, sortBy, pipelines, components, configs } = Astro.props;
---

<PageLayout title={title} subtitle={description}>
    <FilterBar filter={filter} displayStyle={displayStyle} sortBy={sortBy} client:load />
    {!components && <PipelinesListing pipelines={pipelines} client:load />}
    {components && <ComponentListing components={components} client:load />}
    {configs && <ConfigListing configs={configs} client:load />}

    <slot />
</PageLayout>

<style lang="scss"></style>
