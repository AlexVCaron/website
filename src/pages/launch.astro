---
import PageLayout from '@layouts/PageLayout.astro';

export const prerender = false;

// get the id from the url
const id = Astro.url.searchParams.get('id');
const pipeline = Astro.url.searchParams.get('pipeline');
const version = Astro.url.searchParams.get('version');
---

<PageLayout
    title="Launch pipeline"
    subtitle="Configure workflow parameters for a pipeline run."
    mainpage_container={false}
>
    <div class="iframe-container w-100 d-flex align-items-start vh-100">
        <i class="mt-5 m-auto text-success fa-regular fa-spinner-third fa-spin fa-3x"></i>
        <iframe
            class="d-none"
            src={'https://oldsite.nf-co.re/launch' +
                (id ? '?id=' + id : '') +
                (pipeline ? '?pipeline=' + pipeline : '') +
                (version ? '&version=' + version : '')}
            onload="this.classList.remove('d-none'); this.previousElementSibling.classList.add('d-none');"
            title="launch"
            style="border:none;"
            width="100%"
            height="100%"></iframe>
    </div>
</PageLayout>
