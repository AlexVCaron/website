---
import pipelines_json from '@public/pipelines.json';

export const prerender = false;

const { pipeline, version, path } = Astro.params;

const meta = pipelines_json.remote_workflows.find((wf) => wf.name === pipeline);
const release = meta?.releases.find((r) => r.tag_name === version);
if (meta && release) {
    if (path?.startsWith('usage') || path?.startsWith('output')) {
        console.log('redirecting ', path, ' to ', version);
        return Astro.redirect(`/${pipeline}/${version}/docs/${path}`);
    }
}
---
